\DontPrintSemicolon
\SetKwInOut{Input}{input}\SetKwInOut{Output}{output}
\SetKwFunction{Shrink}{Shrink}
\SetKwFunction{Solve}{Solve}
\SetKwFunction{FindMIVCs}{FindMIVCs}
\SetKwFunction{Grow}{Grow}
\SetKwFunction{Dequeue}{Dequeue}
\SetKwFunction{Enqueue}{Enqueue}
\SetKwFunction{approx}{IVC\_UC}
\SetKwProg{Fn}{Function}{:}{}
\SetKwFunction{Init}{Init}


\Fn{\Init{$(I, T) \vdash P$}}{
	$\mathit{Unexplored} \gets \mathcal{P}(T)$ \tcp*{a global variable}
	$\mathit{shrinkingQueue} \gets$ empty queue \tcp*{a global variable}
    $\mathit{approximateWarning} \gets$ false \tcp*{a global variable}
	$\FindMIVCs()$\;
}

\setcounter{AlgoLine}{0}
\Fn{\FindMIVCs{}}{
	\While{$\mathit{Unexplored} \neq \emptyset$}{
		%$U_{max} \gets$ a maximal $U_{max} \in \mathit{Unexplored}$\;
		$U_{max} \gets $ a maximal set $\in \mathit{Unexplored}$\; 
        \eIf{$\Solve(I,U,P)$}{
			$U_{\mathit{IVC}} \gets \approx((I,U_{max}), P)$\;
			$\Shrink(U_{\mathit{IVC}})$\;
		}{
			$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sub}(U_{max})$\;			
		}
		\While{$\mathit{shrinkingQueue}$ is not empty}{
			$\mathit{U} \gets \Dequeue(\mathit{shrinkingQueue})$\;
			\todo{deal with explored seeds in the queue}\;			
			$\Shrink(U)$\;
		}
	}
}

\setcounter{AlgoLine}{0}
\Fn{\Shrink{$U$}}{
	$\mathit{growingQueue} \gets$ empty queue\;
	\For{$T_i \in U$}{
		\If{$ U \setminus \{ T_i \} \in \mathit{Unexplored}$ }{		
			\eIf{$\Solve(I, U \setminus \{ T_i \}, P)$}{
				$U \gets U \setminus \{ T_i \}$\;
			}{
				$\Enqueue(\mathit{growingQueue}, U \setminus \{ T_i \})$\;			
			}
		}
	}
	\textbf{output} $U$;\tcp*{Output Minimal IVC}
	$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sup}(U)$\;
	\While{$\mathit{growingQueue}$ is not empty}{
		$V \gets \Dequeue(\mathit{growingQueue})$\;
		$\Grow(V)$\;
	}
}

\setcounter{AlgoLine}{0}
\Fn{\Grow{$V$}}{
	$M \gets $ a maximal set $ \in \mathit{Unexplored}$ such that $M \supseteq V$\;
	\While{$\Solve(I, M, P)$}{
			$M_{\mathit{IVC}} \gets \approx((I,M), P)$\;			
			$\Enqueue(\mathit{shrinkingQueue}, M_{\mathit{IVC}})$\;
			$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sup}(M_{\mathit{IVC}})$\;			
			$T_i \gets$ choose $T_i \in (M_{\mathit{IVC}} \setminus V)$\;
			$M \gets M \setminus \{ T_i \}$\;
	}	
	$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sub}(M)$\;
}	

