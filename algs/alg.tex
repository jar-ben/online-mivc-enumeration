\DontPrintSemicolon
\SetKwInOut{Input}{input}\SetKwInOut{Output}{output}
\SetKwFunction{Shrink}{Shrink}
\SetKwFunction{FindMIVCs}{FindMIVCs}
\SetKwFunction{Grow}{Grow}
\SetKwFunction{Dequeue}{Dequeue}
\SetKwFunction{Enqueue}{Enqueue}
\SetKwFunction{approx}{IVC\_UC}
\SetKwProg{Fn}{Function}{:}{}
\SetKwFunction{Init}{Init}


\Fn{\Init{$(I, T) \vdash P$}}{
	$\mathit{Unexplored} \gets \mathcal{P}(T)$ \tcp*{a global variable}
	$\mathit{shrinkingQueue} \gets$ empty queue \tcp*{a global variable}
	$\FindMIVCs((I, T) \vdash P)$\;
}

\setcounter{AlgoLine}{0}
\Fn{\FindMIVCs{$(I, T) \vdash P$}}{
	\While{$\mathit{Unexplored} \neq \emptyset$}{
		$U_{max} \gets$ a maximal $U_{max} \in \mathit{Unexplored}$\;
		\eIf{$(I, U_{max}) \vdash P$}{
			$U_{\mathit{IVC}} \gets \approx((I,U_{max}), P)$\;
			$\Shrink(U_{\mathit{IVC}})$\;
		}{
			$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sub}(U_{max})$\;			
		} 
		\While{$\mathit{shrinkingQueue}$ is not empty}{
			$\mathit{U} \gets \Dequeue(\mathit{shrinkingQueue})$\;
			\todo{deal with explored seeds in the queue}\;			
			$\Shrink(U)$\;
		}
	}
}

\setcounter{AlgoLine}{0}
\Fn{\Shrink{$U$}}{
	$\mathit{growingQueue} \gets$ empty queue\;
	\For{$T_i \in U$}{
		\If{$ U \setminus \{ T_i \} \in \mathit{Unexplored}$ }{		
			\eIf{$(I, U \setminus \{ T_i \}) \vdash P$}{
				$U \gets U \setminus \{ T_i \}$\;
			}{
				$\Enqueue(\mathit{growingQueue}, U \setminus \{ T_i \})$\;			
			}
		}
	}
	\textbf{output} $U$\;
	$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sup}(U)$\;
	\While{$\mathit{growingQueue}$ is not empty}{
		$V \gets \Dequeue(\mathit{growingQueue})$\;
		$\Grow(V)$\;
	}
}

\setcounter{AlgoLine}{0}
\Fn{\Grow{$V$}}{
	$M \gets $ a maximal $M \in \mathit{Unexplored}$ such that $M \supseteq V$\;
	\While{$(I, M) \vdash P$}{
			$\Enqueue(\mathit{shrinkingQueue}, M)$\;
			$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sup}(M)$\;
			$M_{\mathit{IVC}} \gets \approx((I,M), P)$\;
			$T_i \gets choose T_i \in (M_{\mathit{IVC}} \setminus V)$\;
			$M \gets M \setminus \{ T_i \}$\;
	}	
	$\mathit{Unexplored} \gets \mathit{Unexplored} \setminus \mathit{Sub}(M)$\;
}	 

