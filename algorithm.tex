In this section, we propose a novel algorithm for online enumeration of all MIVCs. The algorithm is build out of two basic procedures: shrink adn grow. The grow procedure is symmetric to the shrink one.\\
 

\subsection{Shrink Procedure}
 
In our algorithm we maintain the sets \textit{Explored} and  \textit{Unexplored}. We can effectively use the set  \textit{Explored} for speeding up the shrinking procedure. When testing the set $U \setminus \{T_i\}$ (see line 2 in Algorithm~\ref{shrin-procedure}) we first check whether  $U \setminus \{T_i\}$ is explored ( $U \setminus \{T_i\} \in \mathit{Explored}$). If so, the status of  $U \setminus \{T_i\}$ is known and no test for adequacy is needed.

However, there is one more observation that can be exploited. 


\begin{observation}
\label{observation:explored-property}
Let $U_1, U_2$ be subsets of $T$ such that $U_1$ is explored, $U_2$ is unexplored, and $U_1 \subset U_2$. Then $U_1$ is inadequate  for $(I, T) \vdash P$ .\\
Symetrically, if $U_1, U_2$ are subsets of $T$ such that $U_2$ is explored, $U_1$ is unexplored, and $U_1 \subset U_2$. Then $U_1$ is adequate  for $(I, T) \vdash P$ .
\end{observation} 

\begin{proof}
If $U_1$ is adequate, then all of its supersets are necessarily adequate. Thus, if $U_1$ is determined to be adequate, then not just $U_1$ but also all of its supersets becomes explored. Since $U_1$ is explored and $U_2$ is unexplored, then $U_1$ is necessarily an inadequate subset of $T$.
\end{proof}

In other words, we are quaranteed that whenever during the shrinking procedure we come across an explored set, this set is inadequate. Therefore as a further optimization in our algorithm we try to identify as many inadequate sets as possible before starting the shrinking procedure. The search for inadequate sets is done with the help  of grow procedure. 


 



\subsection{Grow Procedure}
 
\begin{algorithm}[!t]
\input{./algs/alg_grow_approximation}
\caption{Approximate grow}
\end{algorithm}

To identify inadequate subsets as quickly as possible we search  maximal inadequate subsets (MISes).  
In order to find an MIS, we can use a \emph{grow} procedure which turns and inadequate subsets into a MIS, i.e. it is a dual of the shrink procedure. However, such procedure might be quite expensive. Similarly as in the case of UC\_BF we can iteratively attempt to add elements to the set that is being
grown, checking each new set for adequacy and keeping only changes that
leave the set inadequate. However, such approach performs linearly many adequacy checks which is rather inefficient. We can boost this procedure in the same way as is boosted the shrinking procedure, i.e. exploit subsets that are already known to be adequate to save some adequacy checks. However, this would mean that we are using a grow procedures to speed shrinks procedures, but to speed the grow procedures we need shrink procedures. It is easy to see, that this is not the right way. Thus, we propose a different approach. 

Instead of finding MISes, we propose to search for approximately MISes. Algorithm~\ref{alg:grow-approx} shows an approach how can be an unexplored inadequate subset $U$ turned into an approximately MIS. It first finds some maximal unexplored superset $M$ such that $M \supseteq U$ and then checks it for adequacy. Note, that if a maximal unexplored subset is inadequate, then it is necessarily an MIS - this is a straightforward consequence of Corollary~\ref{corollary:unex-prop}. 
Otherwise, if $M$ is adequate then it is iteratively reduced until an inadequate subset is found. In each iteration, we first use algorithm \texttt{IVC\_UC}~\cite{single-ivc} to find an approximately minimal IVC $M_{IVC}$ of $M$. $M_{IVC}$ is a succinct representation of the reason (or one of the reasons) of $M$ being adequate. Therefore, we choose some $T_i \in M_{IVC}$ and remove it from $M$ attempting to make it inadequate. We also require $T_i$ to not be included in $U$ which guarantees that resulting $M$ is still a superset of $U$. 
Since both $U$ and $M$ were initially unexplored, this condition on $T_i$ implies that the resultant $M$ was also unexplored at the start of the growing, i.e. an unexplored approximately maximal inadequate subset is found. 

\subsection{Complete Algorithm}
In this section, we describe, how to combine the shrink and grow methods in order to form an efficient online MIVC enumeration algorithm.

Since knowledge of (approximately) maximal inadequate subsets might be used to speed up shrinking procedures, it might be tempting to first find all maximal inadequate subsets. However, there can be up to exponentially many such subsets with respect to the size of $T$. Thus, finding first all maximal inadequate subsets is in general intractable. Instead, we propose to alternate both shrinking and growing procedures. Note, that during shrinking, we might determine some subsets to be inadequate, and such subsets can be subsequently used as \emph{seeds} for growing. Dually, we might determine some subsets to be adequate during the growing procedures, and such subsets can be used as \emph{seeds} for shrinking procedures. Thus, both these procedures somehow complements each other. 

Algorithm~\ref{alg:core} shows our algorithm for online enumeration of all MIVCs. It iteratively... todo popis algoritmu + pseudokod. 


\begin{algorithm}[!t]
\input{./algs/alg}
\caption{AllMIVC algorithm}
\end{algorithm}




 